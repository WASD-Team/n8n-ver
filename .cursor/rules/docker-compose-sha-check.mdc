# Docker Compose SHA Check

## Правило

Перед коммитом и push всегда проверяй, что в `docker-compose.yml` указан **правильный SHA текущего коммита** в image tag.

## Проверка

1. **Получи текущий SHA коммита:**
   ```bash
   git log -1 --format="%H"
   ```

2. **Проверь docker-compose.yml:**
   - Файл: `docker-compose.yml` (корень проекта)
   - Строка с image должна содержать полный SHA последнего коммита
   - Формат: `image: ghcr.io/altvk88/n8n-ver-web:{FULL_SHA}`

3. **Если SHA не совпадает:**
   - Обнови image tag в `docker-compose.yml`
   - Сделай отдельный коммит с обновлением SHA
   - Формат коммита: `Update image tag to {SHORT_SHA}`

## Пример правильного формата

```yaml
services:
  web:
    image: ghcr.io/altvk88/n8n-ver-web:78c8394107001e6921ca1045f83e78a6c0a742c9
    pull_policy: always
    # ...
```

## Когда проверять

- ✅ **Перед каждым git push**
- ✅ **После любого коммита с изменениями кода**
- ✅ **Перед деплоем на Timeweb**

## Важно

- Используй **полный SHA** (40 символов), а не короткий (7 символов)
- Без этого Timeweb будет использовать старую версию образа
- Проверка обязательна для синхронизации кода и Docker образа
